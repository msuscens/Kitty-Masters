
1. Created a new local directory and open terminal
2. Open terminal and enter:
    $ cd /Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull
    $ git clone https://github.com/msuscens/Kitty-Masters
    $ cd Kitty-Masters
    $ npm i
    $ npm install @truffle/hdwallet-provider --save

    [Notes
        a: Mac users for npm installs above will will need to use: 'sudo npm .....'
        b. npm installs may take several minutes.  You may also get alot of Warnings
            about depreciated packages and finally warnings about vulnerabilities,
            ignore these warnings and carry on to the next step.
    ]

3. Optional: In VSCode and open the workspace file in .../Test-Repo-Pull/Kitty-Masters

4. Create a file: 'secrets.json', containing:
    {
        "projectId": "a78925685d7246ef89300dd57aee7c14",
        "mnemonic": "<Insert your MetaMask seed phrase here>"
    }

5. Open a new terminal window and start up ganache-cli, with the
    seed phrase of your choise.  E.g:

    $ ganache-cli -h 127.0.0.1 -p 8545 -m "<your choosen mneumonic seed phrase>"

    You should get:

    Ganache CLI v6.12.2 (ganache-core: 2.13.2)

        Available Accounts
        ==================
        (0) 0x........................................ (100 ETH)
        (1) 0x........................................ (100 ETH)
        (2) 0x........................................ (100 ETH)
        (3) 0x........................................ (100 ETH)
        etc (address will be specific to your mneumonic seed phrase)

        Private Keys
        ==================
        (0) 0x................................................................
        (1) 0x................................................................
        (2) 0x................................................................
        (3) 0x................................................................
        etc (private keys will be specific to your mneumonic seed phrase)

        HD Wallet
        ==================
        Mnemonic:      .......................................
        Base HD Path:  m/44'/60'/0'/0/{account_index}

        Gas Price
        ==================
        20000000000

        Gas Limit
        ==================
        6721975

        Call Gas Limit
        ==================
        9007199254740991

        Listening on 127.0.0.1:8545


    Note: You may use whatever mneumonic seed phrase that you desire for ganache-cli initiation.
    But if you haven't previously used this seed phrase and imported the first/some of the
    ganachie-cli accounts (private key) into your MetaMask as a new account (MM to be set to 
    Ganache-cli network) then you'll need to:
        i) import the generated private key from account[0] into your MetaMask (set to use the
        Ganchie-cli network).   Note gamache-cli's account[0] is the owner account for the contracts
        and when accessing the DAPP/website with this account the Kitty-Factory will be available to
        the user.  If MM is set to use a different account then the Kitty-Factory tab will not appear
        on the website)
        ii) Import a second ganache-cli generated account (private key) into another new MM account
        (note gamache-cli's account[0] will be the owner account)


6. Migrate the contracts
    $ npx truffle migrate --network development



ISSUE:

Compiling your contracts...
===========================
> Compiling ./contracts/IKittyMarketplace.sol
> Compiling ./contracts/KittyContract.sol
> Compiling ./contracts/KittyContractV2.sol
> Compiling ./contracts/KittyMarketplace.sol
> Compiling ./contracts/KittyMarketplaceV2.sol
> Compiling ./contracts/Kittycontract.sol
> Compiling ./contracts/Migrations.sol
> Compiling @openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol
> Compiling @openzeppelin/contracts-upgradeable/security/PausableUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/token/ERC721/ERC721Upgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/token/ERC721/IERC721ReceiverUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/token/ERC721/IERC721Upgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/token/ERC721/extensions/ERC721PausableUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/token/ERC721/extensions/IERC721MetadataUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/utils/AddressUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/utils/ContextUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/utils/StringsUpgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/utils/introspection/ERC165Upgradeable.sol
> Compiling @openzeppelin/contracts-upgradeable/utils/introspection/IERC165Upgradeable.sol
> Artifacts written to /Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/build/contracts
> Compiled successfully using:
   - solc: 0.8.6+commit.11564f7e.Emscripten.clang


> Duplicate contract names found for KittyContract.
> This can cause errors and unknown behavior. Please rename one of your contracts.


Starting migrations...
======================
> Network name:    'development'
> Network id:      1625237927872
> Block gas limit: 6721975 (0x6691b7)


1_initial_migration.js
======================

   Deploying 'Migrations'
   ----------------------
   > transaction hash:    0x636267d908606aa9e450be6addeff8c1eec9ada33a92a6ce32933a7982db153d
   > Blocks: 0            Seconds: 0
   > contract address:    0xEA8fad55d4876e541382601a7B38De67857abF2C
   > block number:        1
   > block timestamp:     1625238426
   > account:             0xfC1d4eA100c57A6D975eD8182FaAcFD17871a1e4
   > balance:             99.99502292
   > gas used:            248854 (0x3cc16)
   > gas price:           20 gwei
   > value sent:          0 ETH
   > total cost:          0.00497708 ETH


   > Saving migration to chain.
   > Saving artifacts
   -------------------------------------
   > Total cost:          0.00497708 ETH


2_token_migration.js
====================

   Deploying 'KittyContract'
   -------------------------
   > transaction hash:    0xc9fa14facf1a210b67273443e2be5d808c906c56b9123a60acf2524a2688799c
   > Blocks: 0            Seconds: 0
   > contract address:    0x36ace1122B48303b8F7a044B43540dC3deC9D9F2
   > block number:        3
   > block timestamp:     1625238452
   > account:             0xfC1d4eA100c57A6D975eD8182FaAcFD17871a1e4
   > balance:             99.915901
   > gas used:            3913583 (0x3bb76f)
   > gas price:           20 gwei
   > value sent:          0 ETH
   > total cost:          0.07827166 ETH


   Deploying 'ProxyAdmin'
   ----------------------
   > transaction hash:    0xedf70b2a7498b0bad348183c06606f104a3367b377fa672a5e2963c95d1d051c
   > Blocks: 0            Seconds: 0
   > contract address:    0x02e260B27fBC4e4A9A0A9e79E04b1c0138c34e65
   > block number:        4
   > block timestamp:     1625238452
   > account:             0xfC1d4eA100c57A6D975eD8182FaAcFD17871a1e4
   > balance:             99.9062466
   > gas used:            482720 (0x75da0)
   > gas price:           20 gwei
   > value sent:          0 ETH
   > total cost:          0.0096544 ETH


   Deploying 'TransparentUpgradeableProxy'
   ---------------------------------------
   > transaction hash:    0x6ca6a7e390ed208d6aa748ee66ff01503cd1faa12c8b869c1363fc0fe17a918e
   > Blocks: 0            Seconds: 0
   > contract address:    0xeC5712cCEFC64eBf00865fE3229dC3a7e7c17170
   > block number:        5
   > block timestamp:     1625238453
   > account:             0xfC1d4eA100c57A6D975eD8182FaAcFD17871a1e4
   > balance:             99.8862904
   > gas used:            997810 (0xf39b2)
   > gas price:           20 gwei
   > value sent:          0 ETH
   > total cost:          0.0199562 ETH


   > Saving migration to chain.
   > Saving artifacts
   -------------------------------------
   > Total cost:          0.10788226 ETH


3_market_migration.js
=====================

Error: The requested contract was not found. Make sure the source code is available for compilation
    at getContractNameAndRunValidation (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/upgrades-core/src/validate/query.ts:46:11)
    at Object.getStorageLayout (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/upgrades-core/src/validate/query.ts:54:41)
    at Object.deployImpl (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/truffle-upgrades/src/utils/deploy-impl.ts:32:18)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
    at deployProxy (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/truffle-upgrades/src/deploy-proxy.ts:46:16)
    at module.exports (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/migrations/3_market_migration.js:10:20)
    at Migration._deploy (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:80:1)
    at Migration._load (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:61:1)
    at Migration.run (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:218:1)
    at Object.runMigrations (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/migrate/index.js:150:1)
    at Object.runFrom (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/migrate/index.js:110:1)
    at Object.run (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/migrate/index.js:87:1)
    at runMigrations (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/core/lib/commands/migrate.js:258:1)
    at Object.run (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/core/lib/commands/migrate.js:223:1)
    at Command.run (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/truffle/build/webpack:/packages/core/lib/command.js:167:1)
Truffle v5.3.11 (core: 5.3.11)
Node v14.15.5
MMB:Kitty-Masters Mark$ 



CONFIRM THAT INSTALL VERSONS ARE SAME :
    MMB:Kitty-Masters Mark$ truffle version
    Truffle v5.3.9 (core: 5.3.9)
    Solidity - 0.8.6 (solc-js)
    Node v14.15.5
    Web3.js v1.3.6
    MMB:Kitty-Masters Mark$ 
VS ORIGINAL:
    Truffle v5.3.9 (core: 5.3.9)
    Solidity - 0.8.6 (solc-js)
    Node v14.15.5
    Web3.js v1.3.6


THEN TRIED:
npm i @openzeppelin/contracts-upgradeable   => made no difference (think is unnecesary)

npm install --save-dev @openzeppelin/truffle-upgrades
sudo npm install --save-dev @openzeppelin/truffle-upgrades


See OZ forum issue that I've raised here: 
https://forum.openzeppelin.com/t/deployproxy-using-truffle-migrate-reset-errors-with-requested-contract-was-not-found/5349/6

_________________________


8. OPTIONALLY: Check that tests scripts run as expected:
    $ truffle test

    Note: Some compiler warnings will apear (this is a known bug in Solc 0.8.5 compiler),
    ignore these warnings (the code is actualy reachable!)

    ISSUE: After compiling contracts gives:

        > Artifacts written to /var/folders/j_/7ljc9tx53bb21q_5_mcvzzkw0000gn/T/test--3380-cBD0mYylgJ7O
        > Compiled successfully using:
        - solc: 0.8.5+commit.a4f2e591.Emscripten.clang


        > Duplicate contract names found for KittyContract.
        > This can cause errors and unknown behavior. Please rename one of your contracts.
        Error: The requested contract was not found. Make sure the source code is available for compilation
            at getContractNameAndRunValidation (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/upgrades-core/src/validate/query.ts:46:11)
            at Object.getStorageLayout (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/upgrades-core/src/validate/query.ts:54:41)
            at Object.deployImpl (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/truffle-upgrades/src/utils/deploy-impl.ts:32:18)
            at processTicksAndRejections (internal/process/task_queues.js:93:5)
            at deployProxy (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/node_modules/@openzeppelin/truffle-upgrades/src/deploy-proxy.ts:46:16)
            at module.exports (/Users/Mark/Documents/BlockChain/IvanOnTechAcademy/Bootcamp/Test-Repo-Pull/Kitty-Masters/migrations/3_market_migration.js:10:20)
            at Migration._deploy (/usr/local/lib/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:80:1)
            at Migration._load (/usr/local/lib/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:61:1)
            at Migration.run (/usr/local/lib/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:218:1)
            at Object.runMigrations (/usr/local/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:150:1)
            at Object.runFrom (/usr/local/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:110:1)
            at Object.runAll (/usr/local/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:114:1)
            at Object.run (/usr/local/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:79:1)
            at Object.run (/usr/local/lib/node_modules/truffle/build/webpack:/packages/core/lib/testing/Test.js:109:1)
            at Object.run (/usr/local/lib/node_modules/truffle/build/webpack:/packages/core/lib/commands/test/index.js:160:1)
            at Command.run (/usr/local/lib/node_modules/truffle/build/webpack:/packages/core/lib/command.js:147:1)
        Truffle v5.3.9 (core: 5.3.9)
        Node v14.15.5
        MMB:Kitty-Masters Mark$ 

